{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/octagon.png","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n\nexport { getPictures };\n    \n    \n  async function getPictures(name, page) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const KEY = '42245088-70138ac1b5442bea0784205eb';\n\n  const searchParams = new URLSearchParams({\n    key: KEY,\n    q: name,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  });\n\n  try {\n    const response = await axios (`${BASE_URL}?${searchParams}`);\n    return response;\n  } catch (error) {\n      console.error(error);\n      iziToast.show({\n        title: 'Sorry,',\n        message: 'try again!',\n        position: 'bottomLeft',\n        backgroundColor: '#ef4040',\n        messageSize: 16,\n        messageColor: '#fff',\n        titleSize: 16,\n        titleColor: '#fff',\n        iconUrl: iconRejected,\n        });\n  }\n}\n\n\n ","export { createMarkup };\n\nfunction createMarkup(arr) {\n  return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n    `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n              width=\"360\"\n            />\n          </a>\n          <div class=\"thumb-block\">\n            <div class=\"block\">\n              <h2 class=\"title\">Likes</h2>\n              <p class=\"amount\">${likes}</p>\n            </div>\n            <div class=\"block\">\n              <h2 class=\"title\">Views</h2>\n              <p class=\"amount\">${views}</p>\n            </div>\n            <div class=\"block\">\n              <h2 class=\"title\">Comments</h2>\n              <p class=\"amount\">${comments}</p>\n            </div>\n            <div class=\"block\">\n              <h2 class=\"title\">Downloads</h2>\n              <p class=\"amount\">${downloads}</p>\n            </div>\n          </div>\n        </li>`)\n    .join('');\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEZSURBVHgBrZVRDoMgDIar0fi6m2xH2Y3Ek2w3cFfZXXwBljFQCai0xemfoCaU/xNpKwAirXWrlDY5w8ViPhVmbgwIO14A3zeQKq/2IuwaqOu6A07+zaVUT8iUi+V28rd5NuSIOQs5wxyFUOZKqRtnmIpZQCZz3acWcgcXUjkF0b2bmwFSpAxskMAgYecaWSsFC8AgnHkMqIBR09TCGrnHsZic5iLs3By3ngWsITMgy9yphEyVJZjUM6esHUS9yfea7N7DAmJz/1niM2EhVBZR2UKl8DS/SFO80OhUnCBkoYWgz2MdNAx8q0jFOK/Fy1GQvdqYe50BQc3PgLDmRyCU+aYOfFsoCtPa+yXvp2/ue9rHqLATflCf5QflVUcNIrzeSwAAAABJRU5ErkJggg==\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getPictures } from \"./js/pixabay-api.js\";\nimport { createMarkup } from \"./js/render-functions.js\";\n\n\nimport iconRejected from './img/octagon.png'\n\nconst formSearch = document.querySelector('.form-search');\nconst listImages = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loaderMore = document.querySelector('.loader-more');\nconst endLoader = document.querySelector('.end-loader');\nconst btnLoad = document.querySelector('.btn-load');\n\n\nlet inputValue = '';\nlet currentPage = 1;\nconst perPage = 15;\nlet totalPages = 0;\n\nloader.style.display = 'none';\nendLoader.style.display = 'none';\nbtnLoad.style.display = 'none';\nloaderMore.style.display = 'none';\n\n\nformSearch.addEventListener('submit', onSearch);\nbtnLoad.addEventListener('click', onLoadMore);\n\n\n// обробник події натискання на кнопку пошук\nfunction onSearch(event) {\n    //сброс дефолтних налаштувань форми після події сабміт\n  event.preventDefault();\n  currentPage = 1;\n\n  \n   \n    // поле введення запиту не може бути порожнім при натисканні на кнопку відправки форми\n    if (event.target.elements.search.value.trim() === '') {\n        iziToast.show({\n        message: `The search query cannot be empty`,\n        timeout: 5000,\n        close: false,\n        position: 'bottomLeft',\n        backgroundColor: '#ef4040',\n        messageSize: 16,\n        messageColor: '#fff',\n        title: 'Sorry,',\n        titleSize: 16,\n        titleColor: '#fff',\n        iconUrl: iconRejected,\n        });\n        return; \n    }\n    \n  \n   inputValue = event.target.elements.search.value.trim();\n  \n\n\n//  очищаємо галерею перед новим пошуком\n  listImages.innerHTML = '';\n  loader.style.display = 'block';\n// очищаєм напис про закінчення знайдених єлементів перед новим запитом\n  endLoader.style.display = 'none';\n\n// робим запит на отримання зображень\n    getPictures(inputValue, currentPage)\n      .then(({ data }) => {\n        console.log(data.totalHits);\n        // обчислюєм кількість сторінок завантаження\n        totalPages = Math.ceil(data.totalHits / perPage);\n        \n            // перевіряєм чи це остання завантажена сторінка\n            if (currentPage === totalPages) {\n              btnLoad.style.display = 'none';\n              endLoader.style.display = 'block';\n              \n            } else {\n              btnLoad.style.display = 'block';\n              \n            }\n\n         // перевіряєм чи є завантажені елементи\n        if (!data.hits.length) {\n       \n        iziToast.show({\n        title: 'Sorry,',\n        message: 'there are no images matching your search query. Please try again!',\n        position: 'bottomLeft',\n        backgroundColor: '#ef4040',\n        messageSize: 16,\n        messageColor: '#fff',\n        titleSize: 16,\n        titleColor: '#fff',\n        iconUrl: iconRejected,\n        });\n          \n           btnLoad.style.display = 'none';\n          \n        }\n        \n\n      listImages.insertAdjacentHTML('afterbegin', createMarkup(data.hits));\n        \n      const refreshPage = new SimpleLightbox('.gallery a', {\n        captions: true,\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n      refreshPage.refresh();\n\n      formSearch.reset();\n        \n\n      \n      \n    \n    })\n    .catch((error) => {\n      \n      console.log(error);\n      iziToast.show({\n        title: 'Sorry,',\n        message: 'try again!',\n        position: 'bottomLeft',\n        backgroundColor: '#ef4040',\n        messageSize: 16,\n        messageColor: '#fff',\n        titleSize: 16,\n        titleColor: '#fff',\n        iconUrl: iconRejected,\n        });\n\n    })\n  \n      .finally(() => {\n        loader.style.display = 'none';\n        \n        \n      }); \n  \n}\n\n\n\nfunction onLoadMore(event) {\n  currentPage += 1;\n  // console.log(currentPage);\n   \n  loaderMore.style.display = 'block';\n\n\n  getPictures(inputValue, currentPage)\n    .then(({ data }) => {\n      \n      listImages.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n\n  \n      smoothScrollToNextGroup();\n        \n      const refreshPage = new SimpleLightbox('.gallery a', {\n        captions: true,\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n      refreshPage.refresh();\n\n      if (currentPage === totalPages) {\n              btnLoad.style.display = 'none';\n              endLoader.style.display = 'block';\n              } \n\n     }\n\n  )\n    .catch((error) => {\n      \n      console.log(error);\n      iziToast.show({\n        title: 'Sorry,',\n        message: 'try again!',\n        position: 'bottomLeft',\n        backgroundColor: '#ef4040',\n        messageSize: 16,\n        messageColor: '#fff',\n        titleSize: 16,\n        titleColor: '#fff',\n        iconUrl: iconRejected,\n        });\n\n    }\n    \n  )\n  .finally(() => {\n        loaderMore.style.display = 'none';\n          \n      }); \n}  \n\nfunction smoothScrollToNextGroup() {\n  \n//Отримуємо елемент галереї\n  const galleryCard = document.querySelector('.gallery-item');\n  //Щоб отримати висоту однієї карточки галереї використовуючи функцію getBoundingClientRect()\n  // функція повертає обє'єкт, з якого отримуємо значення висоти карточки\nlet cardHeight = galleryCard.getBoundingClientRect().height;\nconsole.log(cardHeight);\n  // плавний скролл методом scrollBy на об'єкті window\nwindow.scrollBy({\n                top: cardHeight * 2,\n                behavior: \"smooth\",\n            });\n}\n\n\n"],"names":["getPictures","name","page","BASE_URL","KEY","searchParams","axios","error","iziToast","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","iconRejected$1","formSearch","listImages","loader","loaderMore","endLoader","btnLoad","inputValue","currentPage","perPage","totalPages","onSearch","onLoadMore","event","iconRejected","data","SimpleLightbox","smoothScrollToNextGroup","cardHeight"],"mappings":"owBASE,eAAeA,EAAYC,EAAMC,EAAM,CACvC,MAAMC,EAAW,2BACXC,EAAM,qCAENC,EAAe,IAAI,gBAAgB,CACvC,IAAKD,EACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACV,CAAG,EAED,GAAI,CAEF,OADiB,MAAMI,EAAO,GAAGH,CAAQ,IAAIE,CAAY,EAAE,CAE5D,OAAQE,EAAO,CACZ,QAAQ,MAAMA,CAAK,EACnBC,EAAS,KAAK,CACZ,MAAO,SACP,QAAS,aACT,SAAU,aACV,gBAAiB,UACjB,YAAa,GACb,aAAc,OACd,UAAW,GACX,WAAY,OACZ,QAAS,YACjB,CAAS,CACN,CACH,CCtCA,SAASC,EAAaC,EAAK,CACzB,OAAOA,EAAI,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IACtF;AAAA,0CACsCL,CAAa;AAAA;AAAA;AAAA,qBAGlCD,CAAY;AAAA,qBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAOSC,CAAK;AAAA;AAAA;AAAA;AAAA,kCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,kCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,kCAIRC,CAAS;AAAA;AAAA;AAAA,cAG7B,EACT,KAAK,EAAE,CACZ,CCjCA,MAAeC,EAAA,iiBCWTC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAU,SAAS,cAAc,WAAW,EAGlD,IAAIC,EAAa,GACbC,EAAc,EAClB,MAAMC,EAAU,GAChB,IAAIC,EAAa,EAEjBP,EAAO,MAAM,QAAU,OACvBE,EAAU,MAAM,QAAU,OAC1BC,EAAQ,MAAM,QAAU,OACxBF,EAAW,MAAM,QAAU,OAG3BH,EAAW,iBAAiB,SAAUU,CAAQ,EAC9CL,EAAQ,iBAAiB,QAASM,CAAU,EAI5C,SAASD,EAASE,EAAO,CAQrB,GANFA,EAAM,eAAc,EACpBL,EAAc,EAKRK,EAAM,OAAO,SAAS,OAAO,MAAM,KAAM,IAAK,GAAI,CAClDvB,EAAS,KAAK,CACd,QAAS,mCACT,QAAS,IACT,MAAO,GACP,SAAU,aACV,gBAAiB,UACjB,YAAa,GACb,aAAc,OACd,MAAO,SACP,UAAW,GACX,WAAY,OACZ,QAASwB,CACjB,CAAS,EACD,MACH,CAGFP,EAAaM,EAAM,OAAO,SAAS,OAAO,MAAM,OAKjDX,EAAW,UAAY,GACvBC,EAAO,MAAM,QAAU,QAEvBE,EAAU,MAAM,QAAU,OAGxBvB,EAAYyB,EAAYC,CAAW,EAChC,KAAK,CAAC,CAAE,KAAAO,KAAW,CAClB,QAAQ,IAAIA,EAAK,SAAS,EAE1BL,EAAa,KAAK,KAAKK,EAAK,UAAYN,CAAO,EAGvCD,IAAgBE,GAClBJ,EAAQ,MAAM,QAAU,OACxBD,EAAU,MAAM,QAAU,SAG1BC,EAAQ,MAAM,QAAU,QAKzBS,EAAK,KAAK,SAEfzB,EAAS,KAAK,CACd,MAAO,SACP,QAAS,oEACT,SAAU,aACV,gBAAiB,UACjB,YAAa,GACb,aAAc,OACd,UAAW,GACX,WAAY,OACZ,QAASwB,CACjB,CAAS,EAEER,EAAQ,MAAM,QAAU,QAK7BJ,EAAW,mBAAmB,aAAcX,EAAawB,EAAK,IAAI,CAAC,EAE/C,IAAIC,EAAe,aAAc,CACnD,SAAU,GACV,aAAc,MACd,aAAc,GACtB,CAAO,EACW,QAAO,EAEnBf,EAAW,MAAK,CAMtB,CAAK,EACA,MAAOZ,GAAU,CAEhB,QAAQ,IAAIA,CAAK,EACjBC,EAAS,KAAK,CACZ,MAAO,SACP,QAAS,aACT,SAAU,aACV,gBAAiB,UACjB,YAAa,GACb,aAAc,OACd,UAAW,GACX,WAAY,OACZ,QAASwB,CACjB,CAAS,CAET,CAAK,EAEE,QAAQ,IAAM,CACbX,EAAO,MAAM,QAAU,MAG/B,CAAO,CAEP,CAIA,SAASS,EAAWC,EAAO,CACzBL,GAAe,EAGfJ,EAAW,MAAM,QAAU,QAG3BtB,EAAYyB,EAAYC,CAAW,EAChC,KAAK,CAAC,CAAE,KAAAO,KAAW,CAElBb,EAAW,mBAAmB,YAAaX,EAAawB,EAAK,IAAI,CAAC,EAGlEE,IAEoB,IAAID,EAAe,aAAc,CACnD,SAAU,GACV,aAAc,MACd,aAAc,GACtB,CAAO,EACW,QAAO,EAEfR,IAAgBE,IACZJ,EAAQ,MAAM,QAAU,OACxBD,EAAU,MAAM,QAAU,QAGlC,CAEH,EACE,MAAOhB,GAAU,CAEhB,QAAQ,IAAIA,CAAK,EACjBC,EAAS,KAAK,CACZ,MAAO,SACP,QAAS,aACT,SAAU,aACV,gBAAiB,UACjB,YAAa,GACb,aAAc,OACd,UAAW,GACX,WAAY,OACZ,QAASwB,CACjB,CAAS,CAEJ,CAEF,EACA,QAAQ,IAAM,CACTV,EAAW,MAAM,QAAU,MAEnC,CAAO,CACP,CAEA,SAASa,GAA0B,CAMnC,IAAIC,EAHkB,SAAS,cAAc,eAAe,EAG/B,sBAAuB,EAAC,OACrD,QAAQ,IAAIA,CAAU,EAEtB,OAAO,SAAS,CACA,IAAKA,EAAa,EAClB,SAAU,QAC1B,CAAa,CACb"}